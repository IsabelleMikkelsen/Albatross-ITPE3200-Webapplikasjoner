@model List<Albatross.Models.Question>
@{
    ViewData["Title"] = "A1 Quiz - Albanian Basics";
}

<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card">
                <div class="card-header bg-primary text-white">
                    <h3 class="mb-0">A1 Alphabet Quiz</h3>
                    <p class="mb-0">Press here to begin</p>
                </div>
                <div class="card-body">
                    <form id="quizForm">
                        @for (int i = 0; i < Model.Count; i++)
                        {
                            <div class="question mb-4">
                                <h5>Question @(i + 1): @Model[i].QuestionSentence</h5>
                                <div class="options">
                                    @for (int j = 0; j < Model[i].Options.Count; j++)
                                    {
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" 
                                                   name="question@(i)" 
                                                   id="q@(i)_@(j)" 
                                                   value="@Model[i].Options[j]">
                                            <label class="form-check-label" for="q@(i)_@(j)">
                                                @Model[i].Options[j]
                                            </label>
                                        </div>
                                    }
                                </div>
                            </div>
                        }

                        <div class="text-center">
                            <button type="submit" class="btn btn-success btn-lg">Submit quiz</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
document.getElementById('quizForm').addEventListener('submit', function(e) {
    e.preventDefault();
    
    let score = 0;
    let total = @Model.Count;
    
    @for (int i = 0; i < Model.Count; i++)
    {
        <text>
        const question@(i) = document.querySelector('input[name="question@(i)"]:checked');
        if (question@(i) && question@(i).value === '@Model[i].CorrectOptionIndex') {
            score++;
        }
        </text>
    }
        
    // Redirect to results page
    window.location.href = '@Url.Action("A1Result", "Quiz")' + '?score=' + score + '&total=' + total + '&quizType=A1Alphabet';
});
</script>